(this["webpackJsonpmovie-app"]=this["webpackJsonpmovie-app"]||[]).push([[0],{100:function(e,t,a){},101:function(e,t,a){},102:function(e,t,a){},103:function(e,t,a){},104:function(e,t,a){},105:function(e,t,a){},106:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(26),i=a.n(r),s=(a(65),a(66),a(67),a(11)),o=(a(68),a(57)),l=a(115),j=a(21),d=a.n(j),u=a(110),b=a(111),h=a(112),O=a(9),m=(a(86),a(113)),x=a(114),f=a(109),v=a(116),g=a(31),p=a(24),y=a(25),k=a(60),N=a(58),S=a(51),C=a.n(S),w=a(1),T=function(e){Object(k.a)(a,e);var t=Object(N.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).handleChange=e.handleChange,n}return Object(y.a)(a,[{key:"render",value:function(){var e=this;return Object(w.jsx)(C.a,{options:[{key:0,label:"First Name"},{key:1,label:"Last Name"},{key:2,label:"Age"},{key:3,label:"Descending"}],name:"sort-criteria",placeholder:"Sort By:",handleOnChange:function(t){return e.handleChange(t)}})}}]),a}(c.a.Component);function _(e){var t=e.onChange,a=e.onSelect,c=Object(n.useState)(null),r=Object(s.a)(c,2),i=r[0],o=r[1];return null!==i?Object(w.jsx)(O.a,{to:i}):Object(w.jsxs)(m.a,{collapseOnSelect:!0,expand:"lg",bg:"dark",variant:"dark",className:"actorsNavbar",children:[Object(w.jsx)(m.a.Brand,{children:Object(w.jsx)(g.a,{className:"fa-icon",icon:"film"})}),Object(w.jsx)(m.a.Brand,{children:"Actors Gallery"}),Object(w.jsx)(m.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),Object(w.jsxs)(m.a.Collapse,{id:"responsive-navbar-nav",children:[Object(w.jsxs)(m.a,{bg:"dark",variant:"dark",onSelect:function(e){return o(e)},children:[Object(w.jsx)(x.a.Link,{eventKey:"/",children:"Home"}),Object(w.jsx)(x.a.Link,{eventKey:"/movies",children:"Movies"})]}),Object(w.jsx)(x.a,{className:"search",children:Object(w.jsxs)(f.a,{children:[Object(w.jsx)(f.a.Prepend,{children:Object(w.jsx)(f.a.Text,{id:"basic-addon1",children:"Filter By:"})}),Object(w.jsx)(v.a,{onChange:function(e){return e.target.value.trim().length>1?t(e.target.value.trim()):t("")},placeholder:"First Name, Second Name or Age","aria-label":"Search by First Name, Second Name or Age","aria-describedby":"basic-addon1"})]})}),Object(w.jsx)(x.a,{className:"navDivider"}),Object(w.jsx)(x.a,{children:Object(w.jsx)(T,{handleChange:function(e){var t=Array(4).fill(!1);e.forEach((function(e){return t[e]=!0})),a(t)}})})]})]})}a(100);var L=a(117);function A(e){var t=e.fname,a=e.lname,n=e.imgsrc,c=e.born,r=e.age;return Object(w.jsxs)(L.a,{className:"actorCard text-center",children:[Object(w.jsx)(L.a.Header,{children:Object(w.jsxs)(L.a.Title,{"data-testid":"cardTitle",onClick:function(e){var t=e.target.innerText.split(" ");window.open("https://www.imdb.com/find?q=".concat("".concat(t[0],"+").concat(t[1])),"_blank")},children:[t," ",a," (",r,")"]})}),Object(w.jsx)(L.a.Img,{variant:"top",src:n,alt:"".concat(t," ").concat(a)}),Object(w.jsx)(L.a.Body,{children:Object(w.jsx)(L.a.Text,{children:c})})]})}var B=function(){function e(t,a,n,c){Object(p.a)(this,e),this.fname=t,this.lname=a,this.born=n,this.imgsrc=c}return Object(y.a)(e,[{key:"age",get:function(){return this.calcAge()}},{key:"calcAge",value:function(){var e=new RegExp(/(?:^Born):\s([a-zA-Z]+)\s([0-9]{1,2}),\s([0-9]{4,4})(?:.*)/,"i"),t=[],a=0;return e.test(this.born)&&(t=this.born.match(e)),t&&t.length>3&&(a=new Date(Date.now()-Date.parse("".concat(t[1]," ").concat(t[2]," ").concat(t[3]))).getFullYear()-1970),a}}]),e}();function F(e){var t=e.dataPath,a=e.pathPre,c=e.rowSize,r=Object(n.useState)(""),i=Object(s.a)(r,2),j=i[0],O=i[1],m=Object(n.useState)(Array(4).fill(!1)),x=Object(s.a)(m,2),f=x[0],v=x[1],g=Object(n.useState)(null),p=Object(s.a)(g,2),y=p[0],k=p[1];return Object(n.useEffect)((function(){(function(e,t,a,n,c){var r=e.trim().length<2?new RegExp(/.*/,"i"):new RegExp(e.trim().replace(/ /g,"|"),"i");return d.a.get(a).then((function(e){var a=e.data.map((function(e){return new B(e.fname,e.lname,e.born,e.imgsrc)})).filter((function(e){return r.test(e.fname)||r.test(e.lname)||r.test(e.age)})).sort((function(e,a){return function(e,t,a){var n=Object(s.a)(a,4),c=n[0],r=n[1],i=n[2],o=n[3];o=o?-1:1;var l=0;c&&(l=P(e.fname,t.fname));r&&0===l&&(l=P(e.lname,t.lname));i&&0===l&&(l=e.age-t.age);return o*l}(e,a,t)})).map((function(e){return Object(w.jsx)(b.a,{children:Object(w.jsx)(A,{fname:e.fname,lname:e.lname,imgsrc:n.concat(e.imgsrc),born:e.born,age:e.age},Object(l.a)())},Object(l.a)())}));return o.a.chunk(a,c).map((function(e){return Object(w.jsx)(h.a,{children:e},Object(l.a)())}))}))})(j,f,t,a,c).then((function(e){k(e)})).catch((function(e){return console.log(e)}))}),[j,f,t,a,c]),Object(w.jsxs)(u.a,{children:[Object(w.jsx)(_,{onChange:O,onSelect:v}),Object(w.jsx)("div",{"data-testid":"actorsGrid",children:y})]})}function P(e,t){return e<t?-1:e>t?1:0}a(101);var D=a(59),E=(a(102),a(55)),I=function(){function e(t){Object(p.a)(this,e),this.id=parseInt(t.id),this.title=t.title,this.release_date=new Date(t.release_date),this.overview=t.overview,this.original_language=t.original_language,this.lang=this.original_language.toUpperCase(),this.year=this.release_date.getFullYear(),this.base_url="https://image.tmdb.org/t/p/w500"}return Object(y.a)(e,[{key:"poster_path",set:function(e){this.imgsrc=this.base_url.concat(e)}},{key:"runtime",set:function(e){this.duration=e}},{key:"director_name",set:function(e){var t,a=Object(E.a)(e);try{for(a.s();!(t=a.n()).done;){var n=t.value;if("Director"===n.job){this.director=n.name;break}}}catch(c){a.e(c)}finally{a.f()}}},{key:"casting",set:function(e){this.actors=e.filter((function(e){return"Acting"===e.known_for_department})).sort((function(e,t){return t.popularity-e.popularity})).map((function(e){return e.name})),this.actors=this.actors.length>5?this.actors.slice(0,5):this.actors}}]),e}();function M(e){var t=e.addMovieCard,a=Object(n.useState)(""),c=Object(s.a)(a,2),r=c[0],i=c[1],o=Object(n.useState)(null),l=Object(s.a)(o,2),j=l[0],u=l[1],b=Object(n.useState)(null),h=Object(s.a)(b,2),p=h[0],y=h[1];return Object(n.useEffect)((function(){r?d.a.create({baseURL:"https://api.themoviedb.org/3/search/movie?api_key=da05aa3114b146b2dd9303dad161c614&language=en-US&query="+r,timeout:2e3,headers:{"Content-Type":"application/json;charset=utf-8"}}).get().then((function(e){return e.data.results.map((function(e){return new I(e)}))})).then((function(e){return u(e)})).catch((function(e){console.log(e),u(null)})):u(null)}),[r]),null!==p?Object(w.jsx)(O.a,{to:p}):Object(w.jsxs)("div",{className:"moviesNavbar",children:[Object(w.jsxs)(m.a,{collapseOnSelect:!0,expand:"lg",bg:"dark",variant:"dark",children:[Object(w.jsx)(m.a.Brand,{children:Object(w.jsx)(g.a,{className:"fa-icon",icon:"film"})}),Object(w.jsx)(m.a.Brand,{children:"Movies Gallery"}),Object(w.jsx)(m.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),Object(w.jsxs)(m.a.Collapse,{id:"responsive-navbar-nav",className:"searchNav",children:[Object(w.jsxs)(m.a,{bg:"dark",variant:"dark",onSelect:function(e){return y(e)},children:[Object(w.jsx)(x.a.Link,{eventKey:"/",children:"Home"}),Object(w.jsx)(x.a.Link,{eventKey:"/actors",children:"Actors"})]}),Object(w.jsx)(x.a,{className:"search",children:Object(w.jsxs)(f.a,{children:[Object(w.jsx)(f.a.Prepend,{children:Object(w.jsx)(f.a.Text,{children:"Seach Movies"})}),Object(w.jsx)(v.a,{value:r,onChange:function(e){return i(e.target.value)},placeholder:"ex: Life of Pi","aria-label":"Search movies"})]})})]})]}),null===j?null:0===j.length?Object(w.jsx)(m.a,{bg:"dark",variant:"dark",className:"result-box",children:Object(w.jsx)(x.a,{className:"flex-column",children:Object(w.jsx)(x.a.Link,{disabled:!0,children:"Nothing Found"})})}):Object(w.jsx)(m.a,{bg:"dark",variant:"dark",className:"result-box",children:Object(w.jsx)(x.a,{className:"flex-column",onSelect:function(e){return function(e){u(Object(D.a)(j.filter((function(a){return a.id!==parseInt(e)||(t(a),!1)})))),i("")}(e)},children:j.map((function(e){return Object(w.jsxs)(x.a.Link,{eventKey:e.id,children:[e.title," - ",e.year," (",e.lang,")"]},e.id)}))})})]})}a(103);function U(e){var t=e.movie;return Object(w.jsxs)(L.a,{className:"movieCard",children:[Object(w.jsx)(L.a.Header,{children:Object(w.jsxs)(L.a.Title,{className:"text-center","data-testid":"movieTitle",children:[t.title," (",t.year,")"]})}),Object(w.jsx)(L.a.Img,{variant:"top",src:t.imgsrc,alt:"".concat(t.title)}),Object(w.jsxs)(L.a.Body,{className:"text-start",children:[Object(w.jsxs)(L.a.Text,{children:["Duration: ",t.duration," [min]"]}),Object(w.jsxs)(L.a.Text,{children:["Director: ",t.director]}),Object(w.jsxs)(L.a.Text,{children:["Stars: ",t.actors.join(", ")]}),Object(w.jsx)(L.a.Text,{children:t.overview})]})]})}function K(){var e=Object(n.useState)([]),t=Object(s.a)(e,2),a=t[0],c=t[1];return Object(n.useEffect)((function(){var e=JSON.parse(localStorage.getItem("movies"));e&&c(e)}),[]),Object(w.jsxs)(u.a,{children:[Object(w.jsx)(M,{addMovieCard:function(e){d.a.create({baseURL:"https://api.themoviedb.org/3/movie/".concat(e.id,"?api_key=da05aa3114b146b2dd9303dad161c614&language=en-US"),timeout:2e3,headers:{"Content-Type":"application/json;charset=utf-8"}}).get().then((function(t){e.poster_path=t.data.poster_path,e.runtime=t.data.runtime,d.a.create({baseURL:"https://api.themoviedb.org/3/movie/".concat(e.id,"/credits?api_key=da05aa3114b146b2dd9303dad161c614&language=en-US"),timeout:2e3,headers:{"Content-Type":"application/json;charset=utf-8"}}).get().then((function(t){e.director_name=t.data.crew,e.casting=t.data.cast;var n=a.filter((function(t){return t.id!==e.id})).concat(e);c(n),localStorage.setItem("movies",JSON.stringify(n))})).catch((function(e){console.error("/movie/credits ",e)}))})).catch((function(e){console.error("/movie ",e)}))},movieCards:a}),Object(w.jsx)("div",{"data-testid":"moviesGrid",children:Object(w.jsx)(h.a,{children:a.map((function(e){return Object(w.jsx)(b.a,{lg:4,md:6,children:Object(w.jsx)(U,{movie:e})},e.id)}))})})]})}a(104);var R=a(27);function H(e){e.pathPre;return Object(w.jsx)("div",{className:"homepage-img",children:Object(w.jsxs)(u.a,{children:[Object(w.jsx)("h1",{className:"display-1",children:"Movies App"}),Object(w.jsx)(R.b,{className:"text-uppercase",to:"/movies",children:"Movies"}),Object(w.jsx)(R.b,{className:"text-uppercase",to:"/actors",children:"Actors"}),Object(w.jsx)(R.b,{to:"/bla",children:"404"})]})})}a(105);function G(){var e=Object(n.useState)(null),t=Object(s.a)(e,2),a=t[0],c=t[1];return null!==a?Object(w.jsx)(O.a,{to:a}):Object(w.jsx)("div",{className:"pagenotfound-img",children:Object(w.jsxs)(u.a,{children:[Object(w.jsx)("h1",{children:"404"}),Object(w.jsxs)("div",{className:"notfound",children:[Object(w.jsx)("p",{className:"text-uppercase",children:"page not found"}),Object(w.jsx)(x.a.Link,{eventKey:"/",onSelect:function(e){return c(e)},children:"Home"})]})]})})}var J=a(22),z=a(56),q=a(35);J.b.add(z.a,q.a,q.b,q.c);var Y=function(){var e="/react-movie-app";return Object(w.jsx)(R.a,{children:Object(w.jsxs)(O.d,{children:[Object(w.jsx)(O.b,{exact:!0,path:"/",children:Object(w.jsx)(H,{pathPre:e})}),Object(w.jsx)(O.b,{exact:!0,path:"/movies",children:Object(w.jsx)(K,{})}),Object(w.jsx)(O.b,{exact:!0,path:"/actors",children:Object(w.jsx)(F,{dataPath:e.concat("/data/actors.json"),pathPre:e,rowSize:3})}),Object(w.jsx)(O.b,{path:"/",children:Object(w.jsx)(G,{})})]})})},Z=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,118)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,r=t.getLCP,i=t.getTTFB;a(e),n(e),c(e),r(e),i(e)}))};i.a.render(Object(w.jsx)(c.a.StrictMode,{children:Object(w.jsx)(Y,{})}),document.getElementById("root")),Z()},65:function(e,t,a){},66:function(e,t,a){},68:function(e,t,a){},86:function(e,t,a){}},[[106,1,2]]]);
//# sourceMappingURL=main.ed465e3c.chunk.js.map